<html>

<head>
	<meta charset="utf-8">

	<title>Go WebAssembly</title>

	<meta name="description=" content="Digital Clock in WebAssembly, Go Programming Language">

	<!-- CSS for this page -->
	<link rel="stylesheet" href="styles.css">

	<!-- Partytown script to run JS in web worker -->

	<!-- Javascript glue code -->
	<script src="wasm_exec.js"></script>
</head>

<body>
	<div class="top">
		<div class="playground-buttons-container">
			<button class="trigger playground-button" id="trigger">Click to turn</button>
			<button class="add_dot playground-button" id="add_dot">Click to add dot</button>
		</div>
		<div class="clock" id="clock"></div>
	</div>
	<div class="content">
		<div class="block rotated-0" id="block"></div>
		<br />
		<div class="word" id="word">word</div>
		<div class="jsFetchStatus" id="jsFetchStatus">test</div>
	</div>
</body>

<script>
	if (typeof (w) == "undefined") {
		w = new Worker("jsSortingScript.js");
	}
</script>



<script>
	// getPokemon();

	async function sortLoop(arr, count) {
		while (count < 7) {
			await sortAndPrint(arr, count);
			count++;
		}
	}

	async function sortAndPrint(arr, count) {
		const sortMessage = `${count} times sorting`
		console.log(sortMessage)
		jsFetchStatus.innerText = sortMessage
		const urlSortedPokemon3 = await sortPokemon(arr)
	}

	async function getPokemon() {

		console.log("RUNNING GET POKEMON IN JavaScript!!")
		let numberOfTimesSorted = 0;
		const jsFetchStatus = document.getElementById('jsFetchStatus')


		jsFetchStatus.innerText = 'Fetching Pokemon...'
		const data = await fetch('https://pokeapi.co/api/v2/pokemon')
		const { results } = await data.json()
		console.log({ results })
		let duplicatedPokemon = [...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results, ...results]
		const duplicatedPokemon2 = [...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon, ...duplicatedPokemon]
		const duplicatedPokemon3 = [...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2, ...duplicatedPokemon2]


		console.log(`Attempting to sort ${duplicatedPokemon3.length} 6 times`)
		const startTime = new Date()
		console.log(`Start time: ${startTime.toLocaleTimeString()}`)

		await sortLoop(duplicatedPokemon3, numberOfTimesSorted)

		const endTime = new Date()
		console.log(`End time: ${endTime.toLocaleTimeString()}`)
		const totalSortingTimeMessage = "It took JavaScript " + (endTime.getTime() - startTime.getTime()) / 1000 + " seconds to sort " + duplicatedPokemon3.length.toLocaleString("en-US") + " pokemon " + numberOfTimesSorted + " times";
		console.log(totalSortingTimeMessage)
		jsFetchStatus.innerText = totalSortingTimeMessage

	}

	function sortPokemon(pokemon) {
		return pokemon.sort(function (a, b) {
			if (a.name < b.name) {
				return -1;
			}
			if (a.name > b.name) {
				return 1;
			}
			return 0;
		});
	}


</script>

<script>
	const go = new Go();
	WebAssembly.instantiateStreaming(fetch("lib.wasm"), go.importObject).then((result) => {
		console.log("result", result.instance)
		go.run(result.instance);
	});
</script>

</html>